<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insurance IT Poker Multiplayer</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial;
  background: linear-gradient(135deg,#0f172a,#1e293b);
  color: white;
  text-align: center;
}

.hidden { display: none; }

input, button {
  padding: 12px;
  margin: 6px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

button { background:#22d3ee; cursor:pointer; }

.table {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:14px;
  margin:40px;
}

.card {
  width:90px;
  height:130px;
  background:#38bdf8;
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
  font-weight:bold;
  cursor:pointer;
  transition:0.2s;
  animation:float 3s infinite ease-in-out;
}

.card:hover { transform:scale(1.1); }

.selected { background:#22c55e; color:white; }

.players { margin-top:20px; }

@keyframes float {
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-8px)}
}
</style>
</head>

<body>

<h1>üÉè Insurance IT Poker</h1>

<!-- Join screen -->
<div id="join">
  <input id="name" placeholder="Your name">
  <input id="room" placeholder="Room code">
  <button onclick="join()">Join</button>
</div>

<!-- Game screen -->
<div id="game" class="hidden">
  <h3>Room: <span id="roomLabel"></span></h3>

  <div class="table" id="cards"></div>

  <button onclick="reveal()">Show Votes</button>
  <button onclick="clearVotes()">Clear Votes</button>
  <button onclick="copyLink()">Copy Share Link</button>
  <button onclick="leaveGame()">Leave Game</button>

  <h3 id="avg"></h3>
  <div class="players" id="players"></div>
</div>

<script>
// üî• Replace with your Firebase config
const firebaseConfig = {
    apiKey: "AIzaSyCuxdwsW_kaDwiJk8W7i-5WdpwRVL5_cko",
    authDomain: "pointing-poker-8ef91.firebaseapp.com",
    projectId: "pointing-poker-8ef91",
    databaseURL: "https://pointing-poker-8ef91-default-rtdb.europe-west1.firebasedatabase.app/",
    storageBucket: "pointing-poker-8ef91.firebasestorage.app",
    messagingSenderId: "207111296808",
    appId: "1:207111296808:web:4e70f8f832a0e3fd97621d",
    measurementId: "G-S0WJX04G6P"
  };

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const values = ["1","2","3","5","8","13","21","?"];

let room = "";
let playerId;
let revealState = false;

// Reset on page load
window.onload = () => {
  playerId = Math.random().toString(36).slice(2); // new random ID
  document.getElementById("name").value = "";
  if (!new URLSearchParams(window.location.search).get("room")) {
    document.getElementById("room").value = "";
  }
};

// Read room from URL
const params = new URLSearchParams(window.location.search);
const urlRoom = params.get("room");
if (urlRoom) document
